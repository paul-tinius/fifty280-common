semver {
    snapshotSuffix = "SNAPSHOT"
    dirtyMarker = "dirty"
    branches {
        branch {
            regex = ".+"
            incrementer = "MINOR_INCREMENTER"
            formatter = { "${semver.info.version.major}.${semver.info.version.minor}.${semver.info.version.patch}+build.${semver.info.count}" }
        }
    }

    try {
        System.setProperty("implementation.version", (String) semver.info.commit)
    } catch(Exception e) {
        System.setProperty("implementation.version", "unspecified")
    }
    println "Implementation version: ${System.properties['implementation.version']}"

    try {
        System.setProperty("build.version", (String) semver.info)
    } catch(Exception e) {
        System.setProperty("build.version", "unspecified")
    }
    println "Build version: ${System.properties['build.version']}"
}